# ============================================================================
# ResoftAI Production Environment Configuration
# ============================================================================
#
# IMPORTANT: This is a template file. Copy it to .env and fill in your values.
#
# cp .env.production.example .env
# chmod 600 .env  # Secure the file
#
# Never commit the actual .env file to version control!
# ============================================================================

# ============================================================================
# Application Settings
# ============================================================================
ENV=production
DEBUG=false

# Application secret key (REQUIRED)
# Generate with: python -c 'import secrets; print(secrets.token_urlsafe(32))'
SECRET_KEY=CHANGE_THIS_TO_A_RANDOM_32_CHAR_STRING

# Application name and version
APP_NAME=ResoftAI
APP_VERSION=0.2.2

# Server configuration
HOST=0.0.0.0
PORT=8000
WORKERS=4

# ============================================================================
# Database Configuration
# ============================================================================

# PostgreSQL connection string (REQUIRED)
# Format: postgresql+asyncpg://username:password@host:port/database
DATABASE_URL=postgresql+asyncpg://resoftai_user:CHANGE_THIS_PASSWORD@localhost:5432/resoftai_prod

# Database pool settings (optional, recommended for production)
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10
DB_POOL_RECYCLE=3600
DB_POOL_PRE_PING=true

# ============================================================================
# JWT Authentication
# ============================================================================

# JWT secret key (REQUIRED)
# Generate with: python -c 'import secrets; print(secrets.token_urlsafe(32))'
JWT_SECRET_KEY=CHANGE_THIS_TO_A_RANDOM_32_CHAR_STRING

# JWT configuration
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# ============================================================================
# LLM Provider API Keys
# ============================================================================
# Configure at least one LLM provider

# DeepSeek (Recommended)
DEEPSEEK_API_KEY=sk-your-deepseek-api-key-here
DEEPSEEK_BASE_URL=https://api.deepseek.com

# Anthropic Claude
ANTHROPIC_API_KEY=sk-ant-your-anthropic-api-key-here

# Google Gemini
GOOGLE_API_KEY=your-google-api-key-here

# Moonshot AI
MOONSHOT_API_KEY=sk-your-moonshot-api-key-here

# Zhipu AI
ZHIPU_API_KEY=your-zhipu-api-key-here

# MiniMax
MINIMAX_API_KEY=your-minimax-api-key-here
MINIMAX_GROUP_ID=your-minimax-group-id-here

# Default LLM provider
DEFAULT_LLM_PROVIDER=deepseek
DEFAULT_LLM_MODEL=deepseek-chat

# ============================================================================
# API Configuration
# ============================================================================

# API version prefix
API_V1_PREFIX=/api/v1

# CORS settings (IMPORTANT: Set to your domain in production)
CORS_ORIGINS=https://yourdomain.com,https://www.yourdomain.com,https://app.yourdomain.com

# CORS credentials
CORS_ALLOW_CREDENTIALS=true

# Rate limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=1000

# ============================================================================
# File Upload Configuration
# ============================================================================

# Maximum upload size in bytes (100MB default)
MAX_UPLOAD_SIZE=104857600

# Upload directory (absolute path)
UPLOAD_DIR=/opt/resoftai/uploads

# Allowed file extensions (comma-separated)
ALLOWED_EXTENSIONS=.py,.js,.ts,.java,.go,.rs,.cpp,.c,.h,.hpp,.md,.txt,.json,.yaml,.yml,.xml,.html,.css,.scss,.sql,.sh

# ============================================================================
# Redis Configuration
# ============================================================================

# Redis connection URL
REDIS_URL=redis://localhost:6379/0

# Redis settings
REDIS_MAX_CONNECTIONS=50
REDIS_SOCKET_TIMEOUT=5
REDIS_SOCKET_CONNECT_TIMEOUT=5

# Cache TTL (seconds)
CACHE_TTL=3600

# ============================================================================
# Logging Configuration
# ============================================================================

# Log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# Log file path
LOG_FILE=/var/log/resoftai/app.log

# Log format
LOG_FORMAT=json

# Log rotation
LOG_MAX_BYTES=10485760
LOG_BACKUP_COUNT=10

# Access log
ACCESS_LOG_FILE=/var/log/resoftai/access.log

# Error log
ERROR_LOG_FILE=/var/log/resoftai/error.log

# ============================================================================
# Email Configuration (Optional)
# ============================================================================

# SMTP settings for notifications
SMTP_ENABLED=false
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_FROM=noreply@yourdomain.com
SMTP_FROM_NAME=ResoftAI

# ============================================================================
# Monitoring and Observability
# ============================================================================

# Sentry DSN for error tracking (optional)
SENTRY_DSN=

# Sentry environment
SENTRY_ENVIRONMENT=production

# Sentry traces sample rate
SENTRY_TRACES_SAMPLE_RATE=0.1

# Prometheus metrics enabled
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090

# ============================================================================
# Security Settings
# ============================================================================

# Password hashing
PASSWORD_HASH_ALGORITHM=argon2

# Session timeout (seconds)
SESSION_TIMEOUT=1800

# Max login attempts
MAX_LOGIN_ATTEMPTS=5
LOGIN_ATTEMPT_TIMEOUT=300

# HTTPS enforcement
FORCE_HTTPS=true

# Security headers
HSTS_MAX_AGE=31536000
HSTS_INCLUDE_SUBDOMAINS=true

# ============================================================================
# Enterprise Features
# ============================================================================

# Enterprise features enabled
ENTERPRISE_ENABLED=true

# SSO/SAML settings
SSO_ENABLED=false
SAML_METADATA_URL=
SAML_ENTITY_ID=

# Audit logging
AUDIT_LOG_ENABLED=true
AUDIT_LOG_FILE=/var/log/resoftai/audit.log

# ============================================================================
# Performance Settings
# ============================================================================

# Worker processes (recommended: 2-4 x CPU cores)
WORKERS=4

# Worker class
WORKER_CLASS=uvicorn.workers.UvicornWorker

# Worker timeout (seconds)
WORKER_TIMEOUT=120

# Max requests per worker
MAX_REQUESTS=1000
MAX_REQUESTS_JITTER=50

# Keep alive
KEEP_ALIVE=5

# ============================================================================
# Background Tasks
# ============================================================================

# Celery broker URL (if using Celery)
CELERY_BROKER_URL=redis://localhost:6379/1
CELERY_RESULT_BACKEND=redis://localhost:6379/2

# Task queue workers
CELERY_WORKERS=4

# ============================================================================
# Feature Flags
# ============================================================================

# Plugin system
PLUGINS_ENABLED=true
PLUGIN_MARKETPLACE_ENABLED=true

# Template marketplace
TEMPLATES_ENABLED=true

# Code quality checks
CODE_QUALITY_ENABLED=true

# Performance monitoring
PERFORMANCE_MONITORING_ENABLED=true

# WebSocket support
WEBSOCKET_ENABLED=true

# ============================================================================
# Backup and Disaster Recovery
# ============================================================================

# Automatic backup enabled
AUTO_BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM
BACKUP_DIR=/var/backups/resoftai
BACKUP_RETENTION_DAYS=30

# S3 backup (optional)
S3_BACKUP_ENABLED=false
S3_BUCKET=resoftai-backups
S3_REGION=us-east-1
S3_ACCESS_KEY=
S3_SECRET_KEY=

# ============================================================================
# Third-party Integrations
# ============================================================================

# GitHub integration (optional)
GITHUB_CLIENT_ID=
GITHUB_CLIENT_SECRET=
GITHUB_WEBHOOK_SECRET=

# GitLab integration (optional)
GITLAB_CLIENT_ID=
GITLAB_CLIENT_SECRET=

# Slack integration (optional)
SLACK_WEBHOOK_URL=
SLACK_BOT_TOKEN=

# ============================================================================
# Development and Testing
# ============================================================================

# These should be disabled in production
SWAGGER_ENABLED=false
REDOC_ENABLED=false
DEBUG_TOOLBAR_ENABLED=false
TESTING_MODE=false

# ============================================================================
# Custom Settings
# ============================================================================

# Add your custom environment variables here

# Organization tier limits
TIER_FREE_PROJECT_LIMIT=5
TIER_FREE_STORAGE_LIMIT=1073741824  # 1GB
TIER_FREE_API_LIMIT=1000

TIER_STARTER_PROJECT_LIMIT=20
TIER_STARTER_STORAGE_LIMIT=10737418240  # 10GB
TIER_STARTER_API_LIMIT=10000

TIER_PROFESSIONAL_PROJECT_LIMIT=100
TIER_PROFESSIONAL_STORAGE_LIMIT=107374182400  # 100GB
TIER_PROFESSIONAL_API_LIMIT=100000

TIER_ENTERPRISE_PROJECT_LIMIT=1000
TIER_ENTERPRISE_STORAGE_LIMIT=1099511627776  # 1TB
TIER_ENTERPRISE_API_LIMIT=1000000

# ============================================================================
# End of Configuration
# ============================================================================
