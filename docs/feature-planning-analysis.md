# ResoftAI 系统功能规划分析

**文档版本**: v1.0
**创建时间**: 2025-11-13
**状态**: 待确认

---

## 一、当前系统状态评估

### ✅ 已完成功能

#### 1. 后端核心系统
- [x] 7个专业智能体（PM、需求分析、架构、设计、开发、测试、QA）
- [x] 消息总线（发布/订阅模式）
- [x] 工作流引擎（14个开发阶段）
- [x] 文档生成系统（6种文档类型）
- [x] 多模型LLM抽象层
- [x] 6个AI provider支持（Claude、GLM-4、DeepSeek、Kimi、Minimax、Gemini）
- [x] FastAPI Web服务
- [x] CLI命令行工具

#### 2. 前端基础设施
- [x] Vue 3 + Element Plus 项目结构
- [x] 主布局组件（Layout.vue）
- [x] 路由系统（6个路由）
- [x] Axios API客户端
- [x] 项目API接口封装

#### 3. 配置和依赖
- [x] 多provider配置系统
- [x] 环境变量管理
- [x] 依赖包完整性

### ⏸️ 待开发功能

#### 优先级1 - 核心功能
- [ ] 前端6个页面视图组件
- [ ] WebSocket实时通信
- [ ] Agent基类LLM抽象层更新

#### 优先级2 - 功能增强
- [ ] 用户认证和权限管理
- [ ] 文件管理和版本控制
- [ ] 性能优化

---

## 二、功能模块详细分析

### 模块1: 前端页面组件 🎯 (优先级：高)

#### 1.1 Dashboard.vue - 仪表板

**功能需求（待确认）**：

❓ **问题1.1.1**: 仪表板应该展示哪些核心指标？
- [ ] 选项A: 项目总数、进行中项目、已完成项目、失败项目
- [ ] 选项B: 以上 + 今日新增、本周新增
- [ ] 选项C: 以上 + Token使用统计、成本统计
- [ ] 其他: _________________

❓ **问题1.1.2**: 智能体状态展示方式？
- [ ] 选项A: 简单的卡片展示（名称、状态、当前任务）
- [ ] 选项B: 详细卡片（以上 + Token使用、完成任务数、耗时）
- [ ] 选项C: 实时活动流（显示最近N条智能体活动）
- [ ] 其他: _________________

❓ **问题1.1.3**: 是否需要可视化图表？
- [ ] 是 - 需要图表类型：
  - [ ] 项目进度趋势图（折线图）
  - [ ] Token使用分布（饼图）
  - [ ] 智能体工作负载（柱状图）
  - [ ] 其他: _________________
- [ ] 否 - 只需要数字和简单进度条

❓ **问题1.1.4**: 数据刷新机制？
- [ ] 选项A: 手动刷新按钮
- [ ] 选项B: 自动轮询（每N秒刷新一次）
- [ ] 选项C: WebSocket实时推送
- [ ] 选项D: B + C 混合

**建议实现**:
```vue
Dashboard.vue 结构：
├── 统计卡片区（4个关键指标）
├── 智能体状态区（7个智能体卡片）
├── 最近项目列表（最新5个项目）
└── 系统活动日志（实时更新）
```

---

#### 1.2 Projects.vue - 项目列表页

**功能需求（待确认）**：

❓ **问题1.2.1**: 项目列表展示方式？
- [ ] 选项A: 表格形式（适合信息密集）
- [ ] 选项B: 卡片形式（适合视觉展示）
- [ ] 选项C: 可切换（表格/卡片）
- [ ] 其他: _________________

❓ **问题1.2.2**: 项目筛选和搜索功能？
- [ ] 选项A: 基础搜索（按项目名称）
- [ ] 选项B: 多条件筛选（名称、状态、创建时间、AI模型）
- [ ] 选项C: 高级筛选 + 保存筛选条件
- [ ] 其他: _________________

❓ **问题1.2.3**: 项目状态有哪些？
- [ ] 建议: pending（待开始）、planning（规划中）、developing（开发中）、testing（测试中）、completed（已完成）、failed（失败）
- [ ] 其他状态: _________________

❓ **问题1.2.4**: 批量操作需求？
- [ ] 需要批量删除
- [ ] 需要批量导出
- [ ] 需要批量归档
- [ ] 不需要批量操作

❓ **问题1.2.5**: 分页策略？
- [ ] 选项A: 传统分页（每页10/20/50条）
- [ ] 选项B: 无限滚动
- [ ] 选项C: 虚拟滚动（性能优化）

**建议实现**:
```vue
Projects.vue 结构：
├── 工具栏（新建按钮、搜索框、筛选器、视图切换）
├── 项目列表（表格或卡片）
│   └── 每个项目显示：名称、状态、进度、创建时间、AI模型、操作按钮
└── 分页控件
```

---

#### 1.3 ProjectDetail.vue - 项目详情页

**功能需求（待确认）**：

❓ **问题1.3.1**: 详情页应包含哪些Tab？
- [ ] Tab1: 项目概览（基本信息、进度、状态）
- [ ] Tab2: 任务列表（工作流14个阶段的任务）
- [ ] Tab3: 智能体活动（7个智能体的工作记录）
- [ ] Tab4: 生成的文档（6种文档下载）
- [ ] Tab5: 生成的代码（文件树 + 代码查看）
- [ ] Tab6: 实时日志（所有操作日志）
- [ ] 其他Tab: _________________

❓ **问题1.3.2**: 工作流阶段可视化方式？
- [ ] 选项A: 步骤条（Steps组件）
- [ ] 选项B: 时间线（Timeline组件）
- [ ] 选项C: 流程图（可视化DAG）
- [ ] 其他: _________________

❓ **问题1.3.3**: 是否支持项目干预？
- [ ] 是 - 允许：
  - [ ] 暂停/恢复项目
  - [ ] 跳过某个阶段
  - [ ] 重新运行某个阶段
  - [ ] 修改需求后重新生成
- [ ] 否 - 只能查看，不能干预

❓ **问题1.3.4**: 实时进度更新方式？
- [ ] WebSocket推送（推荐）
- [ ] 轮询更新
- [ ] 手动刷新

❓ **问题1.3.5**: 代码查看器需求？
- [ ] 选项A: 简单的只读文本框
- [ ] 选项B: 语法高亮编辑器（Monaco Editor / CodeMirror）
- [ ] 选项C: 集成IDE功能（编辑、保存、运行）

**建议实现**:
```vue
ProjectDetail.vue 结构：
├── 项目头部（名称、状态徽章、操作按钮）
├── Tab导航
├── Tab内容区
│   ├── 概览: 基本信息卡片 + 进度环图 + 工作流Steps
│   ├── 任务: 14个阶段的任务列表（可展开查看详情）
│   ├── 智能体: 7个智能体的工作记录（谁在什么时候做了什么）
│   ├── 文档: 6个文档的下载卡片
│   ├── 代码: 文件树 + 代码查看器
│   └── 日志: 实时日志流
└── 侧边栏（快速信息）
```

---

#### 1.4 Agents.vue - 智能体管理页

**功能需求（待确认）**：

❓ **问题1.4.1**: 智能体展示内容？
- [ ] 基础信息: 名称、角色、状态
- [ ] 统计信息: 处理任务数、Token使用、平均响应时间
- [ ] 当前任务: 正在执行的任务
- [ ] 历史记录: 最近处理的N个任务
- [ ] 其他: _________________

❓ **问题1.4.2**: 是否需要智能体配置？
- [ ] 是 - 可配置：
  - [ ] 系统提示词（System Prompt）
  - [ ] 温度参数（Temperature）
  - [ ] 使用的LLM模型
  - [ ] 最大Token限制
- [ ] 否 - 只读展示

❓ **问题1.4.3**: 智能体日志查看？
- [ ] 选项A: 点击智能体卡片查看详细日志
- [ ] 选项B: 在当前页面展开查看
- [ ] 选项C: 跳转到独立的日志页面

❓ **问题1.4.4**: 智能体性能监控？
- [ ] 需要 - 显示：响应时间趋势图、成功率、Token消耗
- [ ] 不需要 - 只显示基本状态

**建议实现**:
```vue
Agents.vue 结构：
├── 智能体概览统计（总数、活跃数、总Token使用）
├── 智能体卡片网格（7个智能体）
│   └── 每个卡片：头像、名称、角色、状态、当前任务、统计数据
└── 点击卡片弹出详情对话框
    ├── 基本信息
    ├── 配置参数
    ├── 性能指标
    └── 最近活动日志
```

---

#### 1.5 Files.vue - 文件管理页

**功能需求（待确认）**：

❓ **问题1.5.1**: 文件管理的范围？
- [ ] 选项A: 只管理AI生成的项目代码
- [ ] 选项B: 以上 + 用户上传的文件
- [ ] 选项C: 以上 + 系统配置文件

❓ **问题1.5.2**: 文件树功能？
- [ ] 基础: 展开/收起目录
- [ ] 进阶: 右键菜单（新建、删除、重命名）
- [ ] 高级: 拖拽移动、多选、批量操作

❓ **问题1.5.3**: 文件编辑功能？
- [ ] 选项A: 只读查看
- [ ] 选项B: 在线编辑 + 保存
- [ ] 选项C: 在线编辑 + 保存 + AI辅助编辑

❓ **问题1.5.4**: 版本控制集成？
- [ ] 选项A: 简单的历史版本查看（时间戳 + 内容）
- [ ] 选项B: Git集成（提交、分支、diff、合并）
- [ ] 选项C: 自定义版本控制（不依赖Git）
- [ ] 选项D: 不需要版本控制

❓ **问题1.5.5**: 文件操作权限？
- [ ] 所有文件都可编辑/删除
- [ ] AI生成的文件只读，用户文件可编辑
- [ ] 基于用户角色的权限控制

**建议实现**:
```vue
Files.vue 结构：
├── 左侧: 文件树（目录结构）
│   └── 右键菜单: 新建、删除、重命名、下载
├── 右侧: 文件内容区
│   ├── 文件信息栏（路径、大小、修改时间、操作按钮）
│   ├── 代码编辑器（Monaco Editor，支持语法高亮）
│   └── 版本历史侧边栏（可切换查看不同版本）
└── 底部工具栏（保存、撤销、重做、格式化）
```

---

#### 1.6 Models.vue - 模型配置页

**功能需求（待确认）**：

❓ **问题1.6.1**: 配置管理级别？
- [ ] 选项A: 全局配置（所有项目使用同一配置）
- [ ] 选项B: 项目级配置（每个项目可选择不同模型）
- [ ] 选项C: 智能体级配置（每个智能体独立配置）
- [ ] 选项D: B + C 混合

❓ **问题1.6.2**: 模型配置界面内容？
- [ ] Provider选择（6个选项）
- [ ] API密钥输入（敏感信息处理）
- [ ] 模型选择（每个provider的可用模型列表）
- [ ] 参数调优（Temperature、Top-P、Max Tokens）
- [ ] 连接测试按钮
- [ ] 其他: _________________

❓ **问题1.6.3**: API密钥安全性？
- [ ] 选项A: 明文存储和显示
- [ ] 选项B: 加密存储，显示时脱敏（sk-***）
- [ ] 选项C: 后端加密存储，前端从不显示完整密钥

❓ **问题1.6.4**: 多配置管理？
- [ ] 支持保存多个配置方案（如：开发环境用DeepSeek，生产环境用Claude）
- [ ] 只支持单一配置
- [ ] 配置模板（预设常用配置）

❓ **问题1.6.5**: 模型切换影响范围？
- [ ] 立即生效（所有新任务使用新模型）
- [ ] 仅影响新项目（已有项目继续使用原模型）
- [ ] 需要手动应用（防止误操作）

**建议实现**:
```vue
Models.vue 结构：
├── 当前配置卡片（显示正在使用的配置）
├── 配置表单
│   ├── Provider选择器（下拉框 + Logo）
│   ├── API密钥输入框（密码类型 + 测试按钮）
│   ├── 模型选择器（根据provider动态加载）
│   ├── 参数调优滑块（Temperature、Top-P、Max Tokens）
│   └── 高级选项（可折叠）
├── 测试结果区（连接测试、示例调用）
├── 已保存配置列表（如果支持多配置）
└── 操作按钮（保存、重置、删除）
```

---

### 模块2: WebSocket实时通信 🎯 (优先级：高)

**功能需求（待确认）**：

❓ **问题2.1**: WebSocket通信内容？
- [ ] 项目进度更新（百分比、当前阶段）
- [ ] 智能体状态变化（启动、完成、失败）
- [ ] 实时日志流（所有操作日志）
- [ ] 任务完成通知
- [ ] 系统告警（错误、警告）
- [ ] 其他: _________________

❓ **问题2.2**: 消息格式？
```json
建议格式：
{
  "type": "project.progress",  // 消息类型
  "project_id": "xxx",
  "data": {
    "percentage": 45,
    "stage": "development",
    "message": "正在生成代码..."
  },
  "timestamp": "2025-11-13T10:30:00Z"
}
```
- [ ] 同意此格式
- [ ] 需要调整: _________________

❓ **问题2.3**: 断线重连策略？
- [ ] 自动重连（指数退避）
- [ ] 手动重连
- [ ] 不处理（页面刷新）

❓ **问题2.4**: 消息持久化？
- [ ] 客户端缓存（刷新页面后丢失）
- [ ] 服务端存储（可查询历史消息）
- [ ] 不需要持久化

❓ **问题2.5**: 权限控制？
- [ ] 用户只能订阅自己的项目
- [ ] 管理员可订阅所有项目
- [ ] 无权限控制

**建议实现**:
```
后端:
├── FastAPI WebSocket端点: /ws/projects/{project_id}
├── 消息广播器（Redis Pub/Sub 或内存队列）
├── 事件类型定义（TypedDict）
└── 心跳检测（每30秒ping/pong）

前端:
├── WebSocket管理器（utils/websocket.js）
├── 自动重连机制
├── 消息类型路由（根据type分发到不同组件）
└── Pinia状态管理集成
```

---

### 模块3: Agent基类LLM抽象层更新 🎯 (优先级：高)

**当前问题**:
```python
# 现在 Agent 基类仍然直接使用 Anthropic
from anthropic import Anthropic

class Agent:
    def __init__(self, ...):
        self.client = Anthropic(api_key=settings.anthropic_api_key)
```

**需要更新为**:
```python
from resoftai.llm.factory import LLMFactory

class Agent:
    def __init__(self, ...):
        self.llm = LLMFactory.create(settings.get_llm_config())
```

❓ **问题3.1**: 更新影响范围？
- [ ] 只更新Agent基类
- [ ] 更新Agent基类 + 7个专业智能体
- [ ] 更新Agent基类 + 7个专业智能体 + 示例代码

❓ **问题3.2**: 向后兼容性？
- [ ] 保持API不变（内部替换实现）
- [ ] 更新API签名（需要修改调用方）
- [ ] 提供兼容层（同时支持新旧方式）

❓ **问题3.3**: 是否需要Agent级别的模型选择？
- [ ] 是 - 不同Agent可以使用不同模型（如：开发用DeepSeek，测试用Claude）
- [ ] 否 - 所有Agent使用统一配置

❓ **问题3.4**: 流式响应支持？
- [ ] Agent需要支持流式生成（用于实时日志）
- [ ] 只需要非流式响应
- [ ] 两者都支持，由调用方选择

**建议实现**:
```python
# 更新后的Agent基类
class Agent:
    def __init__(
        self,
        role: AgentRole,
        message_bus: MessageBus,
        project_state: ProjectState,
        llm_config: Optional[LLMConfig] = None  # 可选：Agent级配置
    ):
        self.role = role
        self.message_bus = message_bus
        self.project_state = project_state

        # 使用LLM Factory创建provider
        config = llm_config or Settings().get_llm_config()
        self.llm = LLMFactory.create(config)

    async def generate(self, prompt: str, **kwargs) -> str:
        response = await self.llm.generate(
            prompt=prompt,
            system_prompt=self.system_prompt,
            **kwargs
        )
        return response.content

    async def generate_stream(self, prompt: str, **kwargs):
        async for chunk in self.llm.generate_stream(
            prompt=prompt,
            system_prompt=self.system_prompt,
            **kwargs
        ):
            yield chunk
```

---

### 模块4: 用户认证和权限管理 🔧 (优先级：中)

**功能需求（待确认）**：

❓ **问题4.1**: 认证方式？
- [ ] 选项A: 用户名/密码
- [ ] 选项B: 邮箱/密码
- [ ] 选项C: OAuth（GitHub、Google等）
- [ ] 选项D: A + C 或 B + C

❓ **问题4.2**: Token机制？
- [ ] JWT Token（推荐）
- [ ] Session Cookie
- [ ] OAuth 2.0

❓ **问题4.3**: 用户角色？
- [ ] 建议角色：
  - Admin（管理员）：所有权限
  - User（普通用户）：创建项目、查看自己的项目
  - Viewer（观察者）：只读权限
- [ ] 其他角色需求: _________________

❓ **问题4.4**: 权限粒度？
- [ ] 粗粒度：基于角色的权限（RBAC）
- [ ] 细粒度：基于资源的权限（用户只能操作自己的项目）
- [ ] 混合：RBAC + 资源所有权

❓ **问题4.5**: 注册流程？
- [ ] 开放注册（任何人都可注册）
- [ ] 邀请注册（需要邀请码）
- [ ] 管理员审批
- [ ] 不需要注册（内部系统，手动创建用户）

❓ **问题4.6**: 是否需要以下功能？
- [ ] 忘记密码/重置密码
- [ ] 邮箱验证
- [ ] 两步验证（2FA）
- [ ] 登录历史记录
- [ ] 会话管理（踢出其他设备）

**建议实现**:
```
后端:
├── 用户模型（User表）
├── JWT工具（生成、验证、刷新）
├── 认证中间件（保护API端点）
├── 权限装饰器（@require_role("admin")）
└── 密码加密（bcrypt）

前端:
├── 登录页面（Login.vue）
├── 注册页面（Register.vue，如果需要）
├── Auth Store（Pinia，管理登录状态）
├── 路由守卫（未登录重定向到登录页）
└── Token拦截器（已实现，需要完善）
```

---

### 模块5: 文件管理和版本控制 🔧 (优先级：中)

**功能需求（待确认）**：

❓ **问题5.1**: 版本控制实现方式？
- [ ] 选项A: 完整Git集成（需要Git服务）
- [ ] 选项B: 简化版本控制（时间戳 + 文件快照）
- [ ] 选项C: 不实现版本控制（本期不做）

❓ **问题5.2**: 如果使用Git集成：
- [ ] 需要功能：
  - [ ] 初始化仓库
  - [ ] 提交（commit）
  - [ ] 分支管理
  - [ ] 查看Diff
  - [ ] 回滚到历史版本
  - [ ] 推送到远程（GitHub/GitLab）
- [ ] Git服务：
  - [ ] 本地Git
  - [ ] GitLab API
  - [ ] GitHub API
  - [ ] 自建Git服务器

❓ **问题5.3**: 如果使用简化版本控制：
- [ ] 每次保存创建新版本
- [ ] 手动创建版本（类似快照）
- [ ] 定时自动备份

❓ **问题5.4**: 文件存储方式？
- [ ] 选项A: 本地文件系统
- [ ] 选项B: 对象存储（MinIO、S3）
- [ ] 选项C: 数据库（不推荐，仅小文件）

❓ **问题5.5**: 文件下载/导出？
- [ ] 单文件下载
- [ ] 整个项目打包下载（ZIP）
- [ ] 导出到GitHub仓库

**建议实现（如果选择简化版本控制）**:
```
后端:
├── 文件模型（File表：path, content, version, project_id）
├── 版本模型（FileVersion表：file_id, content, created_at）
├── API端点：
│   ├── GET /api/projects/{id}/files - 获取文件树
│   ├── GET /api/files/{id} - 获取文件内容
│   ├── PUT /api/files/{id} - 更新文件（自动创建版本）
│   ├── GET /api/files/{id}/versions - 获取版本历史
│   └── POST /api/files/{id}/restore/{version} - 恢复到某版本
└── 文件存储服务（支持本地 + S3）

前端:
├── 文件树组件（递归渲染）
├── 代码编辑器（Monaco Editor）
├── 版本历史侧边栏
├── Diff查看器（对比两个版本）
└── 下载/导出功能
```

---

### 模块6: 性能优化 🔧 (优先级：中)

**优化项（待确认）**：

❓ **问题6.1**: 需要优化的场景？
- [ ] 项目列表（数百个项目）
- [ ] 文件树（数千个文件）
- [ ] 日志流（持续输出）
- [ ] 实时数据更新（高频WebSocket消息）
- [ ] 其他: _________________

❓ **问题6.2**: 虚拟滚动需求？
- [ ] 项目列表需要
- [ ] 文件树需要
- [ ] 日志列表需要
- [ ] 都不需要（数据量不大）

❓ **问题6.3**: 缓存策略？
- [ ] API响应缓存（使用 localStorage 或 IndexedDB）
- [ ] LLM响应缓存（相同prompt返回缓存结果）
- [ ] 静态资源缓存（Service Worker）
- [ ] 不需要缓存

❓ **问题6.4**: 懒加载需求？
- [ ] 路由懒加载（已实现）
- [ ] 组件懒加载（大组件按需加载）
- [ ] 图片懒加载
- [ ] 数据懒加载（分页、无限滚动）

❓ **问题6.5**: 构建优化？
- [ ] 代码分割（Code Splitting）
- [ ] Tree Shaking
- [ ] 压缩和混淆
- [ ] CDN加速
- [ ] 不需要（开发阶段）

**建议实现**:
```
前端优化:
├── 虚拟滚动（vue-virtual-scroller）
├── 防抖/节流（debounce/throttle）
├── 组件懒加载（defineAsyncComponent）
├── 请求合并和去重
└── Service Worker（PWA）

后端优化:
├── 数据库索引优化
├── API响应缓存（Redis）
├── 分页和游标分页
├── 异步任务队列（Celery）
└── 限流（Rate Limiting）
```

---

## 三、技术选型确认

### 前端技术栈

❓ **问题7.1**: 代码编辑器选择？
- [ ] Monaco Editor（VS Code同款，功能强大，体积较大 ~3MB）
- [ ] CodeMirror 6（轻量级，高度可定制）
- [ ] Ace Editor（老牌编辑器）
- [ ] 简单的 textarea（不需要高级功能）

❓ **问题7.2**: 图表库选择？
- [ ] ECharts（功能全面，中文文档好）
- [ ] Chart.js（轻量简单）
- [ ] D3.js（高度定制）
- [ ] 不需要图表

❓ **问题7.3**: WebSocket库？
- [ ] 原生WebSocket
- [ ] Socket.io（推荐，支持降级）
- [ ] SockJS

❓ **问题7.4**: 状态管理策略？
- [ ] Pinia（已选择）全局状态
- [ ] 部分用 provide/inject
- [ ] 组合式 API（setup）本地状态

### 后端技术栈

❓ **问题7.5**: 数据库选择？
- [ ] SQLite（简单，单文件，适合开发/小规模）
- [ ] PostgreSQL（功能强大，适合生产）
- [ ] MySQL
- [ ] MongoDB（文档型，适合灵活schema）

❓ **问题7.6**: WebSocket实现？
- [ ] FastAPI原生WebSocket
- [ ] Socket.IO（需要python-socketio）
- [ ] Channels（Django生态）

❓ **问题7.7**: 任务队列？
- [ ] Celery + Redis（重量级）
- [ ] RQ（Redis Queue，轻量级）
- [ ] 不需要（直接异步执行）

❓ **问题7.8**: 文件存储？
- [ ] 本地文件系统（简单）
- [ ] MinIO（兼容S3的对象存储）
- [ ] 云存储（S3、OSS）

---

## 四、非功能性需求

### 性能要求

❓ **问题8.1**: 性能目标？
- [ ] API响应时间：< 200ms（普通查询）、< 2s（复杂查询）
- [ ] WebSocket延迟：< 100ms
- [ ] 页面加载时间：< 3s（首屏）
- [ ] 无具体要求

❓ **问题8.2**: 并发支持？
- [ ] 单用户（开发测试）
- [ ] 10-50用户（小团队）
- [ ] 100+用户（企业级）

### 可靠性要求

❓ **问题8.3**: 错误处理？
- [ ] 前端：Toast消息提示
- [ ] 前端：Error Boundary（捕获组件错误）
- [ ] 后端：详细错误日志
- [ ] 后端：错误追踪（Sentry）
- [ ] 所有以上

❓ **问题8.4**: 数据备份？
- [ ] 自动备份（定时任务）
- [ ] 手动备份（导出功能）
- [ ] 不需要备份

### 安全性要求

❓ **问题8.5**: 安全措施？
- [ ] HTTPS（生产环境）
- [ ] CORS配置
- [ ] SQL注入防护（ORM）
- [ ] XSS防护
- [ ] CSRF Token
- [ ] API限流
- [ ] 所有以上

❓ **问题8.6**: 敏感信息保护？
- [ ] API密钥加密存储
- [ ] 密码哈希（bcrypt）
- [ ] 日志脱敏（不记录密码、Token）
- [ ] 所有以上

---

## 五、部署和运维

❓ **问题9.1**: 部署方式？
- [ ] 选项A: 本地开发（不考虑生产部署）
- [ ] 选项B: Docker容器化
- [ ] 选项C: K8s集群
- [ ] 选项D: 云平台（AWS、阿里云等）

❓ **问题9.2**: 前后端分离部署？
- [ ] 是 - 前端Nginx，后端独立服务
- [ ] 否 - 后端服务静态文件

❓ **问题9.3**: 监控需求？
- [ ] 应用监控（APM）
- [ ] 日志聚合（ELK）
- [ ] 告警通知
- [ ] 不需要

---

## 六、开发优先级建议

### Phase 1: 核心功能（2-3周）

**第一优先级**：
1. ✅ 更新Agent基类使用LLM抽象（1天）
2. ✅ 实现WebSocket基础设施（2-3天）
   - 后端WebSocket端点
   - 前端WebSocket管理器
   - 消息类型定义
3. ✅ 完成6个前端页面组件（7-10天）
   - Dashboard.vue（2天）
   - Projects.vue（2天）
   - ProjectDetail.vue（3天）
   - Agents.vue（1天）
   - Files.vue（2天）
   - Models.vue（1天）
4. ✅ 集成测试和Bug修复（2-3天）

### Phase 2: 功能增强（2-3周）

**第二优先级**：
1. 用户认证系统（3-4天）
   - 后端JWT认证
   - 前端登录/注册页面
   - 权限中间件
2. 文件管理和版本控制（4-5天）
   - 文件存储服务
   - 版本控制逻辑
   - 前端文件编辑器
3. 性能优化（2-3天）
   - 虚拟滚动
   - 缓存策略
   - 构建优化

### Phase 3: 完善和上线（1-2周）

**第三优先级**：
1. 完善文档（2天）
2. 安全加固（2天）
3. 性能测试和调优（2天）
4. 部署配置（2天）

---

## 七、需要您确认的关键决策

### 🔴 必须立即确认（阻塞开发）

1. **数据库选择**：SQLite还是PostgreSQL？
2. **认证方式**：是否需要用户登录？如果需要，选择哪种方式？
3. **部署目标**：本地开发还是准备生产部署？
4. **代码编辑器**：Monaco Editor还是轻量级方案？

### 🟡 建议尽快确认（影响设计）

1. Dashboard仪表板展示内容和图表需求
2. 项目详情页Tab结构
3. 文件管理是否需要在线编辑和版本控制
4. WebSocket消息格式
5. Agent是否需要独立配置模型

### 🟢 可以稍后确认（不阻塞初期开发）

1. 性能优化的具体策略
2. 监控和告警方案
3. 高级权限管理
4. 部署架构细节

---

## 八、下一步行动

请您review这份分析文档，对于每个❓标记的问题，请选择您的答案或提供补充说明。

完成确认后，我将：
1. 生成详细的开发任务清单
2. 创建技术实现方案
3. 开始编码实现

**建议回复方式**：
```
问题1.1.1: 选项C
问题1.1.2: 选项B
问题1.2.1: 选项C
...

额外说明：
- Dashboard图表使用ECharts
- 暂不需要用户认证，所有人都可以访问
- 使用SQLite数据库
...
```

---

**文档状态**: ⏸️ 等待确认
**预估总工时**: 40-60人天（6-8周，1人开发）
**建议团队规模**: 1-2名全栈工程师
